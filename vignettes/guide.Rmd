---
title: "`fbseqStudies` package installation and usage guide"
author: Will Landau
date: 2015
bibliography: bibliography.bib
output: 
  rmarkdown::html_vignette:
    number_sections: true
    toc: true
vignette: >
  \VignetteEngine{knitr::rmarkdown}
  \VignetteIndexEntry{`fbseqStudies` package installation and usage guide}
  \usepackage[utf8]{inputenc}
---

# Purpose

`fbseqStudies` reproduces the results of academic studies of the methodology behind the `fbseq` and `fbseqCUDA` packages.

# System requirements

- Mac OS X or Linux. 
- R $\ge$ 3.2.0
- R packages `methods`, `parallel`, `snowfall`, `doMC`, `ggplot2`, `pracma`, `plyr`, `reshape2`, and `knitr`, available though the [Comprehensive R Archive Network (CRAN](https://cran.r-project.org/).
- The R package `edgeR`, available through [Bioconductor](http://bioconductor.org/). 
- R package `rstan`, the installation of which is explained on a [GitHub wiki](https://github.com/stan-dev/rstan/wiki/RStan-Getting-Started).
- A CUDA-enabled NVIDIA graphics processing unit (GPU) with compute capability 2.0 or greater.
- CUDA version 6.0 or greater.
- The `fbseq` and `fbseqCUDA` packages, available on GitHub.

More information about CUDA is available through [NVIDIA](http://www.nvidia.com/object/cuda_home_new.html). If your computer does not have these features, you can rent GPU time from [cloud computing enterprises](http://www.nvidia.com/object/gpu-cloud-computing-services.html) such as [Amazon Web Services](http://aws.amazon.com/ec2/instance-types/). See the installation vignettes for the `fbseq` and `fbseqCUDA` packages for installation details about those packages.

# Installation

## Option 1: install a stable release (recommended).

Navigate to a [list of stable releases](https://github.com/wlandau/fbseqStudies/releases) on the project's [GitHub page](https://github.com/wlandau/fbseqStudies). Download the desired `tar.gz` bundle, then install it either with `install.packages(..., repos = NULL, type="source")` from within R  `R CMD INSTALL` from the Unix/Linux command line.

## Option 2: use `install_github` to install the development version.

For this option, you need the `devtools` package, available from CRAN or GitHub. Open R and run 

```{r, eval=F}
library(devtools)
install_github("wlandau/fbseqStudies")
```

## Option 3: build the development version from the source.

Open a command line program such as Terminal in Mac/Linux and enter the following commands.

```
git clone git@github.com:wlandau/fbseqStudies.git
R CMD build fbseqStudies
R CMD INSTALL ...
```

where `...` is replaced by the name of the tarball produced by `R CMD build`. 

# Run the studies

Each function below reproduces the results of a paper.

|------------------------------------|--------------------------------------------------| 
| `paper_computation()`   | publication pending | 
| `paper_case()`  | publication pending |
| `paper_priors()`  | publication pending |

For further control, choose among the following.

|------------------------------------|--------------------------------------------------| 
|`progress()`| In the above 3 `paper_` functions, the rate limiting step is to produce directories called `real_mcmc`, `coverage_mcmc`, etc., each with `.rds` files inside. Each `.rds` file contains a single (simulated or real) RNA-seq dataset and all the analyses of that dataset. To check the progress of the analyses, run `progress("coverage_mcmc")`, for example. Running `progress("coverage_mcmc")` lists all the methods used to analyze each dataset in the `coverage_mcmc` directory produced by `coverage_mcmc()` in `paper_case()`.
| `real_mcmc()`  | Run different versions of the model on the @paschold dataset. | 
| `computation_mcmc()`  | Duplicate sections of the @paschold dataset to create datasets of varying size. Fit the default model to see how runtime scales with the number of genes and the number of libraries. | 
| `coverage_mcmc()`  | Simulate different datasets from the model to assess the ability to recapture parameters of interest in credible intervals calculated from the estimated full joint posterior distribution. | 
| `comparison_mcmc()`  | Simulate datasets from multiple scenarios and fit multiple versions of the model to assess gene detection power and the calibration of posterior probabilites. | 
| `real_analyze()`  | Extract figures, tables, and other results from the output of `real_mcmc()` | 
| `computation_analyze()` | Similar, but for `computation_mcmc()` | 
| `coverage_analyze()` | Similar, but for `coverage_mcmc()` | 
| `comparison_analyze()`  | Similar, but for `comparison_mcmc()`  | 
|`paper_case_figures()` | Once the `_mcmc()` and `_analyze()` functions are run in the current working directory, run this function to reproduce all the figures and tables of the computation paper (inside `paper_computation()`).

# References

For even finer-grained control, see the manual and help files.


